############################################
# Server
############################################
# Render bindet den Port Ã¼ber $PORT
server.port=${PORT:8080}
server.address=0.0.0.0

# Forwarded-Header von Render (TLS-Termination)
server.forward-headers-strategy=framework

# HTTP/2 & Komprimierung (Antwortzeiten)
server.http2.enabled=true
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,application/json,application/javascript

############################################
# Datenbank
############################################
spring.datasource.url=${DB_URL:${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/metering}}
spring.datasource.username=${DB_USER:${SPRING_DATASOURCE_USERNAME:metering}}
spring.datasource.password=${DB_PASSWORD:${SPRING_DATASOURCE_PASSWORD:metering}}

spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.format_sql=true

spring.flyway.enabled=true

############################################
# Actuator / Management
############################################
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.probes.enabled=true
management.endpoint.health.show-components=always
management.endpoint.health.show-details=always

############################################
# Billing / Integration (konfigurierbar via .env)
############################################
billing.scale=${BILLING_SCALE:2}
billing.roundingMode=${BILLING_ROUNDING_MODE:HALF_UP}

integration.enabled=${INTEGRATION_ENABLED:true}
integration.offlineHours=${INTEGRATION_OFFLINE_HOURS:24}
integration.jiraBaseUrl=${JIRA_BASE_URL:http://localhost:8081}
integration.erpBaseUrl=${ERP_BASE_URL:http://localhost:8082}

############################################
# Springdoc (Swagger)
############################################
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operationsSorter=alpha
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true

############################################
# Security (Demo)
############################################
# Optional: Basic-Auth nur einschalten, wenn du willst
demo.security.basic-enabled=${DEMO_SECURITY_BASIC_ENABLED:false}

############################################
# CORS (konfigurierbar via .env)
############################################
demo.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://brunata-metering-demo.onrender.com,http://localhost:8080,http://localhost:8081,http://localhost:8082}
demo.cors.allowed-methods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,PATCH,OPTIONS,HEAD}
demo.cors.allowed-headers=${CORS_ALLOWED_HEADERS:*}
demo.cors.allow-credentials=${CORS_ALLOW_CREDENTIALS:true}
demo.cors.max-age=${CORS_MAX_AGE:3600}
